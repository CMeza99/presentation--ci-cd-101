language: ruby
rvm:
- 2.2
install:
- bundle install
- gem install jekyll html-proofer
script:
- bundle exec jekyll doctor && bundle exec jekyll build --verbose
- htmlproofer ./_site --allow-hash-href
branches:
  only:
  - master
  except:
  - gh-pages
after_success:
- git remote set-url origin git@github.com:${TRAVIS_REPO_SLUG}.git
- git checkout -B gh-pages
- git push --set-upstream origin gh-pages
